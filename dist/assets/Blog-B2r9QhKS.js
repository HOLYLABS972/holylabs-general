import{j as e,v as t,r as s,h as a,k as l,w as r,x as i}from"./ui-vendor-BXVz6hC9.js";import{a as n,L as c}from"./react-vendor-N3uaRP_J.js";import{u as o,B as x}from"./index-D8RjTRIl.js";import{g as d,a as m}from"./blogService-jCKtlAAr.js";import"./firebase-BOKyl3KT.js";import"./firebase-BS6BjUNz.js";const p=()=>{const{t:p,language:h}=o(),[g,u]=n.useState([]),[b,f]=n.useState([]),[j,v]=n.useState(!0),[N,y]=n.useState(""),[w,F]=n.useState([]),[C,T]=n.useState(!1),[k,S]=n.useState(null),[D,E]=n.useState(!1);n.useEffect(()=>{(async()=>{try{v(!0);const[e,t]=await Promise.all([d({published:!0,limit:9}),m()]);u(e.posts),T(e.hasMore),S(e.lastDoc),f(t)}catch(e){}finally{v(!1)}})()},[]),n.useEffect(()=>{if(!N&&0===w.length)return void I();const e=setTimeout(async()=>{try{v(!0);const e={published:!0,limit:9,searchTerm:N||void 0,tags:w.length>0?w:void 0},t=await d(e);u(t.posts),T(t.hasMore),S(t.lastDoc)}catch(e){}finally{v(!1)}},300);return()=>clearTimeout(e)},[N,w]);const I=async()=>{try{const e=await d({published:!0,limit:9});u(e.posts),T(e.hasMore),S(e.lastDoc)}catch(e){}},M=e=>{if(!e)return"";const t=e.toDate?e.toDate():new Date(e);return new Intl.DateTimeFormat("he"===h?"he-IL":"en-US",{year:"numeric",month:"long",day:"numeric"}).format(t)};return e.jsxs("div",{className:"min-h-screen bg-[#FBFCFF] relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.10] pointer-events-none",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E\")",backgroundSize:"200px 200px"}}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 sm:py-20 relative z-10",children:[e.jsxs("div",{className:"text-center mb-8 mt-10",children:[e.jsxs("div",{className:"inline-flex items-center justify-center gap-2 px-4 py-2 mb-6 rounded-full border border-[#d8dfe5] bg-[rgba(241,242,251,0.9)] shadow-[0px_0px_0px_2px_rgba(241,242,251,0.9)]",children:[e.jsx(t,{className:"w-4 h-4 text-[#161e2e] opacity-80"}),e.jsx("span",{className:"font-normal text-[#161e2e] text-sm opacity-80",children:p("blog.badge")})]}),e.jsx("h1",{className:"text-4xl md:text-5xl text-center bg-gradient-to-t from-black to-black/60 bg-clip-text text-transparent mb-6 leading-tight",style:{lineHeight:"1.2",paddingBottom:"0.1em"},children:p("blog.title")}),e.jsx("p",{className:"text-lg text-[#64646e] max-w-3xl mx-auto leading-relaxed",children:p("blog.description")})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"rounded-3xl",children:[e.jsxs("div",{className:"relative",children:[e.jsx(s,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#64646e]"}),e.jsx("input",{type:"text",placeholder:p("blog.search.placeholder"),value:N,onChange:e=>y(e.target.value),className:"w-full pl-12 pr-4 py-3 rounded-lg border border-[#d8dfe5] bg-white text-black placeholder-[#64646e] focus:outline-none focus:ring-2 focus:ring-[#389CFF] focus:border-transparent transition-colors"})]}),(N||w.length>0)&&e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-[#d8dfe5]",children:[e.jsxs("span",{className:"text-sm text-[#64646e]",children:[p("blog.filter.active"),":"]}),N&&e.jsxs("span",{className:"px-3 py-1 bg-[#389CFF] text-white text-sm rounded-full",children:['"',N,'"']}),w.map(t=>e.jsx("span",{className:"px-3 py-1 bg-[#389CFF] text-white text-sm rounded-full",children:t},t)),e.jsx("button",{onClick:()=>{y(""),F([])},className:"text-sm text-[#389CFF] hover:underline ml-2",children:p("blog.filter.clear")})]})]})}),e.jsx("div",{children:j?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(a,{className:"w-8 h-8 animate-spin text-[#389CFF]"})}):0===g.length?e.jsxs("div",{className:"text-center py-20",children:[e.jsx(t,{className:"w-16 h-16 text-[#64646e] mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold text-black mb-2",children:p("blog.empty.title")}),e.jsx("p",{className:"text-[#64646e]",children:p("blog.empty.description")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:g.map(t=>{var s;const a=(e=>({title:e.title[h]||e.title.en||e.title.he||"Untitled",excerpt:e.excerpt[h]||e.excerpt.en||e.excerpt.he||"",slug:e.slug[h]||e.slug.en||e.slug.he||"",readTime:e.readTime[h]||e.readTime.en||e.readTime.he||1}))(t);return e.jsx(c,{to:`/blog/${encodeURIComponent(a.slug||(null==(s=t.slug)?void 0:s[h])||t.id||"")}`,className:"block",children:e.jsxs("article",{className:"group cursor-pointer ",style:{backgroundColor:"rgb(246, 251, 255)",borderRadius:"16px",boxShadow:"rgba(16, 49, 77, 0.05) 0px 0.706592px 0.706592px -0.291667px, rgba(16, 49, 77, 0.06) 0px 1.80656px 1.80656px -0.583333px, rgba(16, 49, 77, 0.06) 0px 3.62176px 3.62176px -0.875px, rgba(16, 49, 77, 0.06) 0px 6.8656px 6.8656px -1.16667px, rgba(16, 49, 77, 0.07) 0px 13.6468px 13.6468px -1.45833px, rgba(16, 49, 77, 0.1) 0px 30px 30px -1.75px"},children:[t.featuredImage&&e.jsx("div",{className:"relative h-64 mb-4 rounded-t-2xl overflow-hidden",children:e.jsx("img",{src:t.featuredImage,alt:a.title,className:"w-full h-full object-cover "})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-2xl font-semibold text-black mb-4 group-hover:text-[#389CFF] transition-colors line-clamp-2 leading-tight overflow-hidden",style:{lineHeight:"1.3"},children:a.title}),e.jsx("p",{className:"text-[#64646e] text-base leading-relaxed mb-6 line-clamp-3",children:a.excerpt}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-[#64646e] mb-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(l,{className:"w-4 h-4"}),M(t.publishedAt)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(r,{className:"w-4 h-4"}),a.readTime," ",p("blog.readTime")]})]}),t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.slice(0,2).map(t=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white border border-[#d8dfe5] text-[#64646e] text-sm rounded-full",children:[e.jsx(i,{className:"w-3 h-3"}),t]},t))})]})]},t.id)})})}),C&&e.jsx("div",{className:"text-center",children:e.jsx(x,{onClick:async()=>{if(C&&!D)try{E(!0);const e={published:!0,limit:9,lastDoc:k,searchTerm:N||void 0,tags:w.length>0?w:void 0},t=await d(e);u(e=>[...e,...t.posts]),T(t.hasMore),S(t.lastDoc)}catch(e){}finally{E(!1)}},disabled:D,variant:"outline",size:"lg",children:D?e.jsxs(e.Fragment,{children:[e.jsx(a,{className:"w-4 h-4 animate-spin mr-2"}),p("blog.loadingMore")]}):p("blog.loadMore")})})]})})]})]})};export{p as default};
