import{j as e,h as s,y as t,k as l,w as a,z as n,d as r,m as i,x as o}from"./ui-vendor-BXVz6hC9.js";import{i as c,a as d,L as m}from"./react-vendor-N3uaRP_J.js";import{u as x,B as h}from"./index-D8RjTRIl.js";import{b as p,g}from"./blogService-jCKtlAAr.js";import{M as u,r as b}from"./markdown-D0LGahJO.js";import"./firebase-BOKyl3KT.js";import"./firebase-BS6BjUNz.js";const f=()=>{const{slug:f}=c(),{t:j,language:v}=x(),[N,w]=d.useState(null),[y,F]=d.useState([]),[k,C]=d.useState(!0),[T,I]=d.useState(!1),[P,E]=d.useState(!1),S=f?(e=>{if(!e)return"";try{let t=decodeURIComponent(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch(s){}return t}catch(t){return e}})(f):"";d.useEffect(()=>{(async()=>{if(!S)return I(!0),void C(!1);try{C(!0),I(!1);let s=await p(S,v);if(!s){const e="en"===v?"he":"en";s=await p(S,e)}if(!s&&f&&f!==S&&(s=await p(f,v),!s)){const e="en"===v?"he":"en";s=await p(f,e)}if(!s)return void I(!0);if(w(s),s.tags&&s.tags.length>0)try{const e=(await g({published:!0,tags:s.tags,limit:4})).posts.filter(e=>e.id!==s.id).slice(0,3);F(e)}catch(e){F([])}}catch(s){I(!0)}finally{C(!1)}})()},[S,f,v]);const R=e=>{if(!e)return"";try{const s=e.toDate?e.toDate():new Date(e);return new Intl.DateTimeFormat("he"===v?"he-IL":"en-US",{year:"numeric",month:"long",day:"numeric"}).format(s)}catch(s){return""}},U=e=>{var s,t,l,a,n,r,i,o,c,d,m,x,h,p,g,u,b,f,j,N,w,y,F,k,C,T,I;const P=((null==(s=e.content)?void 0:s[v])||(null==(t=e.content)?void 0:t.en)||(null==(l=e.content)?void 0:l.he)||"").replace(/^#\s+[^\n]*\n?/,"");return{title:(null==(a=e.title)?void 0:a[v])||(null==(n=e.title)?void 0:n.en)||(null==(r=e.title)?void 0:r.he)||"Untitled",content:P,excerpt:(null==(i=e.excerpt)?void 0:i[v])||(null==(o=e.excerpt)?void 0:o.en)||(null==(c=e.excerpt)?void 0:c.he)||"",slug:(null==(d=e.slug)?void 0:d[v])||(null==(m=e.slug)?void 0:m.en)||(null==(x=e.slug)?void 0:x.he)||"",readTime:(null==(h=e.readTime)?void 0:h[v])||(null==(p=e.readTime)?void 0:p.en)||(null==(g=e.readTime)?void 0:g.he)||1,metaTitle:(null==(b=null==(u=e.seo)?void 0:u.metaTitle)?void 0:b[v])||(null==(j=null==(f=e.seo)?void 0:f.metaTitle)?void 0:j.en)||(null==(w=null==(N=e.seo)?void 0:N.metaTitle)?void 0:w.he)||"",metaDescription:(null==(F=null==(y=e.seo)?void 0:y.metaDescription)?void 0:F[v])||(null==(C=null==(k=e.seo)?void 0:k.metaDescription)?void 0:C.en)||(null==(I=null==(T=e.seo)?void 0:T.metaDescription)?void 0:I.he)||""}},B=(()=>{if("undefined"!=typeof window){const e=new URL(window.location.href);return"en"!==v&&e.searchParams.set("lang",v),e.toString()}return""})(),D={twitter:`https://twitter.com/intent/tweet?url=${encodeURIComponent(B)}&text=${encodeURIComponent(N?U(N).title:"")}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(B)}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(B)}`};if(k)return e.jsx("div",{className:"min-h-screen bg-[#FBFCFF] flex items-center justify-center",children:e.jsx(s,{className:"w-8 h-8 animate-spin text-[#389CFF]"})});if(T||!N)return e.jsx("div",{className:"min-h-screen bg-[#FBFCFF] relative overflow-hidden",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-20 relative z-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-black mb-4 mt-20",children:j("blogPost.notFound.title")}),e.jsx("p",{className:"text-lg text-[#64646e] mb-8 mt-10",children:j("blogPost.notFound.description")}),e.jsx(m,{to:"/blog",children:e.jsxs(h,{variant:"cta-primary",children:[e.jsx(t,{className:"w-4 h-4 mr-2"}),j("blogPost.backToBlog")]})})]})})});const L=U(N);return e.jsxs("div",{className:"min-h-screen bg-[#FBFCFF] relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.10] pointer-events-none",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E\")",backgroundSize:"200px 200px"}}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-10 sm:py-20 relative z-10",children:[e.jsx("div",{className:"mb-4 mt-10 hidden md:block",children:e.jsxs(m,{to:"/blog",className:"inline-flex items-center gap-2 text-[#389CFF] hover:text-[#2980ff] transition-colors",children:[e.jsx(t,{className:"w-4 h-4"}),j("blogPost.backToBlog")]})}),e.jsxs("header",{className:"mb-12 md:mb-12 mt-10 md:mt-0",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-black mb-6 leading-tight",children:L.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-[#64646e] mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[j("blogPost.publishedOn")," ",R(N.publishedAt)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[L.readTime," ",j("blog.readTime")]})]})]}),N.featuredImage&&e.jsx("div",{className:"relative h-64 md:h-96 rounded-2xl overflow-hidden",children:e.jsx("img",{src:N.featuredImage,alt:L.title,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none"}})})]}),e.jsx("div",{className:"prose prose-lg max-w-none mb-8 bg-white rounded-xl shadow-md",children:e.jsx("div",{className:"p-8",children:e.jsx("div",{className:"prose prose-lg max-w-none prose-headings:text-[#161e2e] prose-a:text-[#389CFF] prose-a:no-underline hover:prose-a:underline prose-img:rounded-xl prose-p:leading-relaxed prose-p:mb-6",children:e.jsx(u,{rehypePlugins:[b],components:{p:({children:s})=>e.jsx("p",{className:"mb-6 leading-relaxed",children:s}),h1:({children:s})=>e.jsx("h1",{className:"text-3xl font-bold mb-6 mt-8 first:mt-0",children:s}),h2:({children:s})=>e.jsx("h2",{className:"text-2xl font-bold mb-4 mt-8 first:mt-0",children:s}),h3:({children:s})=>e.jsx("h3",{className:"text-xl font-bold mb-4 mt-6 first:mt-0",children:s}),ul:({children:s})=>e.jsx("ul",{className:"list-disc list-inside mb-6 space-y-2",children:s}),ol:({children:s})=>e.jsx("ol",{className:"list-decimal list-inside mb-6 space-y-2",children:s}),li:({children:s})=>e.jsx("li",{className:"leading-relaxed",children:s}),blockquote:({children:s})=>e.jsx("blockquote",{className:"border-l-4 border-[#389CFF] pl-4 italic my-6",children:s}),pre:({children:s})=>e.jsx("pre",{className:"bg-gray-100 rounded-lg p-4 overflow-x-auto my-6",children:s}),code:({children:s,className:t})=>!t?e.jsx("code",{className:"bg-gray-100 px-1 py-0.5 rounded text-sm",children:s}):e.jsx("code",{className:t,children:s}),img:({src:s,alt:t,...l})=>e.jsx("img",{...l,src:s,alt:t,className:"rounded-xl max-w-full h-auto",onError:e=>{e.currentTarget.style.display="none"}})},children:L.content})})})}),e.jsxs("div",{className:"mb-8 p-6",style:{backgroundColor:"rgb(246, 251, 255)",borderRadius:"16px",boxShadow:"rgba(16, 49, 77, 0.05) 0px 0.706592px 0.706592px -0.291667px, rgba(16, 49, 77, 0.06) 0px 1.80656px 1.80656px -0.583333px, rgba(16, 49, 77, 0.06) 0px 3.62176px 3.62176px -0.875px, rgba(16, 49, 77, 0.06) 0px 6.8656px 6.8656px -1.16667px, rgba(16, 49, 77, 0.07) 0px 13.6468px 13.6468px -1.45833px, rgba(16, 49, 77, 0.1) 0px 30px 30px -1.75px"},children:[e.jsxs("h3",{className:"text-lg font-semibold text-black mb-4 flex items-center gap-2",children:[e.jsx(n,{className:"w-5 h-5"}),j("blogPost.share")]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("a",{href:D.twitter,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors font-medium",children:[e.jsx("img",{src:"/logos/x.png",alt:"X",className:"w-4 h-4 filter brightness-0 invert"}),e.jsx("span",{className:"hidden sm:inline",children:"X (Twitter)"}),e.jsx("span",{className:"sm:hidden",children:"X"})]}),e.jsxs("a",{href:D.linkedin,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-3 bg-[#0077b5] text-white rounded-lg hover:bg-[#005582] transition-colors font-medium",children:[e.jsx("img",{src:"/logos/linkedin.png",alt:"LinkedIn",className:"w-4 h-4 filter brightness-0 invert"}),e.jsx("span",{className:"hidden sm:inline",children:"LinkedIn"}),e.jsx("span",{className:"sm:hidden",children:"In"})]}),e.jsxs("a",{href:D.facebook,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-3 bg-[#4267B2] text-white rounded-lg hover:bg-[#365899] transition-colors font-medium",children:[e.jsx("img",{src:"/logos/facebook.png",alt:"Facebook",className:"w-4 h-4 filter brightness-0 invert",onError:e=>{e.currentTarget.outerHTML='<span class="w-4 h-4 text-center font-bold text-sm">f</span>'}}),e.jsx("span",{className:"hidden sm:inline",children:"Facebook"}),e.jsx("span",{className:"sm:hidden",children:"FB"})]}),e.jsx("button",{onClick:async()=>{try{navigator.clipboard&&B&&(await navigator.clipboard.writeText(B),E(!0),setTimeout(()=>E(!1),2e3))}catch(e){try{const e=document.createElement("textarea");e.value=B,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),E(!0),setTimeout(()=>E(!1),2e3)}catch(s){}}},className:"flex items-center gap-2 px-4 py-3 bg-white border-2 border-[#389CFF] text-[#389CFF] rounded-lg hover:bg-[#389CFF] hover:text-white transition-colors font-medium",children:P?e.jsxs(e.Fragment,{children:[e.jsx(r,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:j("blogPost.linkCopied")}),e.jsx("span",{className:"sm:hidden",children:"âœ“"})]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:j("blogPost.copyLink")}),e.jsx("span",{className:"sm:hidden",children:"Copy"})]})})]}),P&&e.jsxs("div",{className:"mt-3 text-sm text-green-600 flex items-center gap-1",children:[e.jsx(r,{className:"w-4 h-4"}),j("blogPost.linkCopied")]})]}),N.tags&&N.tags.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-black mb-4 flex items-center gap-2",children:[e.jsx(o,{className:"w-5 h-5"}),j("blogPost.tags")]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:N.tags.map(s=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white border border-[#d8dfe5] text-[#64646e] text-sm rounded-full hover:border-[#389CFF] hover:text-[#389CFF] transition-colors",children:[e.jsx(o,{className:"w-3 h-3"}),s]},s))})]}),y.length>0&&e.jsxs("div",{className:"p-8",style:{backgroundColor:"rgb(246, 251, 255)",borderRadius:"16px",boxShadow:"rgba(16, 49, 77, 0.05) 0px 0.706592px 0.706592px -0.291667px, rgba(16, 49, 77, 0.06) 0px 1.80656px 1.80656px -0.583333px, rgba(16, 49, 77, 0.06) 0px 3.62176px 3.62176px -0.875px, rgba(16, 49, 77, 0.06) 0px 6.8656px 6.8656px -1.16667px, rgba(16, 49, 77, 0.07) 0px 13.6468px 13.6468px -1.45833px, rgba(16, 49, 77, 0.1) 0px 30px 30px -1.75px"},children:[e.jsx("h2",{className:"text-2xl font-semibold text-black mb-8",children:j("blogPost.relatedPosts")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:y.map(s=>{var t;const n=U(s),r=n.slug||(null==(t=s.slug)?void 0:t[v])||s.id||"";return e.jsxs("article",{className:"group bg-white rounded-xl p-4 border border-[#d8dfe5] hover:border-[#389CFF] transition-colors",children:[s.featuredImage&&e.jsx("div",{className:"relative h-32 mb-4 rounded-lg overflow-hidden",children:e.jsx("img",{src:s.featuredImage,alt:n.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:e=>{e.currentTarget.style.display="none"}})}),e.jsx("h3",{className:"text-lg font-semibold text-black mb-2 group-hover:text-[#389CFF] transition-colors line-clamp-2",children:e.jsx(m,{to:`/blog/${encodeURIComponent(r)}`,children:n.title})}),e.jsx("p",{className:"text-[#64646e] text-sm line-clamp-2 mb-3",children:n.excerpt}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-[#64646e]",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(l,{className:"w-3 h-3"}),R(s.publishedAt)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(a,{className:"w-3 h-3"}),n.readTime," ",j("blog.readTime")]})]})]},s.id)})})]})]})]})};export{f as default};
